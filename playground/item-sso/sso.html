<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
<!--这里会调用protectd接口 并且会传入 账号 密码 和 appId appId会从地址栏读取-->
<form action="/protectd" method="get">
    <label for="username">
        账号：<input name="username" id="username" type="text">
    </label>
    <label for="password">密码：<input name="password" id="password" type="password"></label>
    <label for="client_id"><input name="client_id" value="" id="client_id" type="hidden"></label>
    <button type="submit" id="button">登录</button>
</form>
<script>

    function parseUrl(url) {
        const parsedUrl = new URL(url);
        const params = {};

        // 获取查询参数
        parsedUrl.searchParams.forEach((value, key) => {
            params[key] = value;
        });

        return {
            protocol: parsedUrl.protocol,
            host: parsedUrl.host,
            pathname: parsedUrl.pathname,
            params: params
        };
    }

    //读取AppId
    const paramsObj = parseUrl(location.href);
    console.log(paramsObj);
    const clientId = paramsObj.params['client_id'];
    const redirectUrl = paramsObj.params['redirect_url'];
    console.log(clientId, redirectUrl)
    document.getElementById('client_id').value = clientId
</script>
</body>

</html>
